<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Synapse - Integrated App</title>
    <script src="https://unpkg.com/react@18/umd/react.development.js"></script>
    <script src="https://unpkg.com/react-dom@18/umd/react-dom.development.js"></script>
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
    <script src="geminiService.js"></script>
    <link rel="stylesheet" href="styles/App.css">
</head>
<body>
    <div id="root"></div>
    
    <script type="text/babel">
        const { useState, useEffect } = React;

        // LoginPage Component
        const LoginPage = ({ onGoogleLogin }) => {
            return (
                <div className="login-container">
                    <div className="logo">S</div>
                    
                    <h1 className="title">Synapse</h1>
                    
                    <p className="subtitle">
                        AI-powered timetable generator that analyzes your energy levels and optimizes your schedule
                    </p>

                    <button 
                        onClick={onGoogleLogin}
                        className="google-btn"
                    >
                        <svg className="google-icon" viewBox="0 0 24 24" fill="currentColor">
                            <path d="M22.56 12.25c0-.78-.07-1.53-.2-2.25H12v4.26h5.92c-.26 1.37-1.04 2.53-2.21 3.31v2.77h3.57c2.08-1.92 3.28-4.74 3.28-8.09z" fill="#4285F4"/>
                            <path d="M12 23c2.97 0 5.46-.98 7.28-2.66l-3.57-2.77c-.98.66-2.23 1.06-3.71 1.06-2.86 0-5.29-1.93-6.16-4.53H2.18v2.84C3.99 20.53 7.7 23 12 23z" fill="#34A853"/>
                            <path d="M5.84 14.09c-.22-.66-.35-1.36-.35-2.09s.13-1.43.35-2.09V7.07H2.18C1.43 8.55 1 10.22 1 12s.43 3.45 1.18 4.93l2.85-2.22.81-.62z" fill="#FBBC05"/>
                            <path d="M12 5.38c1.62 0 3.06.56 4.21 1.64l3.15-3.15C17.45 2.09 14.97 1 12 1 7.7 1 3.99 3.47 2.18 7.07l3.66 2.84c.87-2.6 3.3-4.53 6.16-4.53z" fill="#EA4335"/>
                        </svg>
                        Continue with Google
                    </button>

                    <p className="privacy-note">
                        By signing in, you agree to our Terms of Service and Privacy Policy. 
                        We only access your basic profile information to personalize your experience.
                    </p>
                </div>
            );
        };

        // IntegratedApp Component
        const IntegratedApp = () => {
            const [isAuthenticated, setIsAuthenticated] = useState(false);
            const [currentView, setCurrentView] = useState('login');
            const [userData, setUserData] = useState(null);
            const [geminiService, setGeminiService] = useState(null);
            const [isSendingToGemini, setIsSendingToGemini] = useState(false);
            const [geminiResponse, setGeminiResponse] = useState(null);
            const [apiKey, setApiKey] = useState('');

            // Check for existing authentication on mount
            useEffect(() => {
                const savedAuth = localStorage.getItem('synapse_auth');
                const savedUserData = localStorage.getItem('synapse_user_data');
                
                if (savedAuth === 'true' && savedUserData) {
                    setIsAuthenticated(true);
                    setUserData(JSON.parse(savedUserData));
                    setCurrentView('dashboard');
                }
            }, []);

            // Initialize Gemini service when API key is provided
            useEffect(() => {
                if (apiKey) {
                    setGeminiService(new GeminiService(apiKey));
                }
            }, [apiKey]);

            const handleGoogleLogin = () => {
                // Simulate Google OAuth flow with a proper redirect
                const mockUser = {
                    id: 'user123',
                    name: 'John Doe',
                    email: 'john@example.com',
                    picture: 'https://via.placeholder.com/150'
                };
                
                // Show loading state
                alert('ðŸ” Redirecting to Google OAuth...\n\n(In demo mode, this simulates the OAuth flow)');
                
                // Simulate OAuth redirect delay
                setTimeout(() => {
                    setIsAuthenticated(true);
                    setUserData(mockUser);
                    setCurrentView('initial');
                    
                    localStorage.setItem('synapse_auth', 'true');
                    localStorage.setItem('synapse_user_data', JSON.stringify(mockUser));
                    
                    alert('âœ… Successfully logged in with Google!');
                }, 1500);
            };

            const handleInitialComplete = (data) => {
                const updatedUserData = {
                    ...userData,
                    initialAssessment: data,
                    completedAt: new Date().toISOString()
                };
                
                setUserData(updatedUserData);
                setCurrentView('dashboard');
                localStorage.setItem('synapse_user_data', JSON.stringify(updatedUserData));
            };

            const handleLogout = () => {
                setIsAuthenticated(false);
                setUserData(null);
                setCurrentView('login');
                setGeminiResponse(null);
                
                localStorage.removeItem('synapse_auth');
                localStorage.removeItem('synapse_user_data');
                localStorage.removeItem('synapse_assessment_data');
            };

            // Send data to Gemini API
            const sendToGemini = async () => {
                if (!geminiService || !userData?.initialAssessment) {
                    alert('Please complete the initial assessment and enter your Gemini API key first');
                    return;
                }

                setIsSendingToGemini(true);
                try {
                    const mcqData = formatAssessmentForGemini(userData.initialAssessment);
                    const response = await geminiService.sendMCQData(mcqData.answers, mcqData.questions);
                    setGeminiResponse(response);
                    console.log('Gemini API Response:', response);
                } catch (error) {
                    console.error('Failed to send data to Gemini:', error);
                    alert('Failed to send data to Gemini. Please check your API key and try again.');
                } finally {
                    setIsSendingToGemini(false);
                }
            };

            // Test Gemini API connection
            const testGeminiConnection = async () => {
                if (!geminiService) {
                    alert('Please enter your Gemini API key first');
                    return;
                }

                try {
                    const isConnected = await geminiService.testConnection();
                    if (isConnected) {
                        alert('âœ… Gemini API connection successful!');
                    } else {
                        alert('âŒ Gemini API connection failed. Please check your API key.');
                    }
                } catch (error) {
                    console.error('Connection test failed:', error);
                    alert('âŒ Connection test failed. Please check your API key.');
                }
            };

            // Format assessment data for Gemini
            const formatAssessmentForGemini = (assessmentData) => {
                const questions = [];
                const answers = {};
                
                Object.entries(assessmentData).forEach(([key, value], index) => {
                    questions.push({
                        id: index + 1,
                        question: `Assessment Question ${index + 1}: ${key}`,
                        options: [
                            { id: value, text: value }
                        ]
                    });
                    answers[index + 1] = value;
                });

                return { questions, answers };
            };

            const renderCurrentView = () => {
                if (!isAuthenticated) {
                    return <LoginPage onGoogleLogin={handleGoogleLogin} />;
                }

                switch (currentView) {
                    case 'initial':
                        return <InitialAssessment onComplete={handleInitialComplete} />;
                    case 'dashboard':
                        return <Dashboard userData={userData} onRestart={() => setCurrentView('initial')} />;
                    default:
                        return <InitialAssessment onComplete={handleInitialComplete} />;
                }
            };

            return (
                <div className="app">
                    {isAuthenticated && (
                        <div className="header">
                            <h1 className="logo">SYNAPSE</h1>
                            <p className="tagline">Your mind, optimized</p>
                            <div className="header-actions">
                                <button onClick={handleLogout} className="logout-btn">
                                    Logout
                                </button>
                            </div>
                        </div>
                    )}
                    
                    {renderCurrentView()}

                    {/* Gemini AI Integration */}
                    {isAuthenticated && currentView === 'dashboard' && userData?.initialAssessment && (
                        <div className="gemini-integration">
                            <div className="gemini-section">
                                <h3>ðŸ¤– AI Analysis with Gemini</h3>
                                
                                <div className="gemini-controls">
                                    <input
                                        type="password"
                                        value={apiKey}
                                        onChange={(e) => setApiKey(e.target.value)}
                                        placeholder="Enter your Gemini API key"
                                        className="api-key-input"
                                    />
                                    
                                    <div className="gemini-buttons">
                                        <button
                                            onClick={testGeminiConnection}
                                            disabled={!apiKey}
                                            className="test-btn"
                                        >
                                            Test Connection
                                        </button>
                                        
                                        <button
                                            onClick={sendToGemini}
                                            disabled={!geminiService || isSendingToGemini}
                                            className="send-btn"
                                        >
                                            {isSendingToGemini ? 'Sending...' : 'Analyze with AI'}
                                        </button>
                                    </div>
                                </div>
                                
                                {geminiResponse && (
                                    <div className="gemini-response">
                                        <h4>AI Analysis Results:</h4>
                                        <pre>{JSON.stringify(geminiResponse, null, 2)}</pre>
                                    </div>
                                )}
                            </div>
                        </div>
                    )}
                </div>
            );
        };

        // InitialAssessment Component (Full 8 sections)
        const InitialAssessment = ({ onComplete }) => {
            const [currentSection, setCurrentSection] = useState(0);
            const [formData, setFormData] = useState(() => {
                const savedData = localStorage.getItem('synapse_assessment_data');
                return savedData ? JSON.parse(savedData) : {};
            });

            useEffect(() => {
                localStorage.setItem('synapse_assessment_data', JSON.stringify(formData));
            }, [formData]);

            const sections = [
                {
                    title: "Sleep & Energy Patterns",
                    questions: [
                        {
                            id: "alert_time",
                            text: "When do you naturally feel most alert and productive?",
                            type: "mcq",
                            options: [
                                { value: "early_bird", label: "Early Bird (6-10 AM)", description: "I'm sharpest with my morning coffee, love tackling big tasks before the world wakes up" },
                                { value: "mid_morning", label: "Mid-Morning Warrior (10 AM-2 PM)", description: "I need time to ease into my day, but then I'm unstoppable until lunch" },
                                { value: "afternoon", label: "Afternoon Powerhouse (2-6 PM)", description: "Post-lunch is when my brain comes alive, I do my best thinking then." },
                                { value: "night_owl", label: "Night Owl (6 PM-12 AM)", description: "The quieter the world gets, the more focused I become" }
                            ]
                        },
                        {
                            id: "bedtime",
                            text: "What time do you usually go to bed?",
                            type: "mcq",
                            options: [
                                { value: "early", label: "Early Sleeper (Before 10 PM)", description: "I'm winding down by 9 PM, ready for tomorrow's early start" },
                                { value: "standard", label: "Standard Sleeper (10-11 PM)", description: "I like a consistent routine, lights out around 10:30 PM" },
                                { value: "late", label: "Late Sleeper (11 PM-12 AM)", description: "I'm still productive in the evening, bed around 11:30 PM" },
                                { value: "very_late", label: "Very Late Sleeper (After 12 AM)", description: "I'm a natural night person, often up past midnight" }
                            ]
                        },
                        {
                            id: "wake_time",
                            text: "What time do you typically wake up?",
                            type: "mcq",
                            options: [
                                { value: "very_early", label: "Very Early Riser (Before 6 AM)", description: "I love having the morning to myself before the day starts" },
                                { value: "early", label: "Early Riser (6-7 AM)", description: "I wake up naturally around 6:30 AM, no alarm needed" },
                                { value: "standard", label: "Standard Riser (7-8 AM)", description: "I need that solid 7-8 hours, up around 7:30 AM" },
                                { value: "late", label: "Late Riser (After 8 AM)", description: "I'm not a morning person; I need extra time to wake up properly." }
                            ]
                        },
                        {
                            id: "sleep_hours",
                            text: "How many hours of sleep do you usually get?",
                            type: "mcq",
                            options: [
                                { value: "short", label: "Short Sleeper (Less than 6 hours)", description: "I function well on 5-6 hours, I'm naturally low-sleep." },
                                { value: "efficient", label: "Efficient Sleeper (6-7 hours)", description: "6-7 hours is my sweet spot; more feels excessive." },
                                { value: "standard", label: "Standard Sleeper (7-8 hours)", description: "I need my full 7-8 hours to function at my best." },
                                { value: "long", label: "Long Sleeper (More than 8 hours)", description: "I'm naturally a long sleeper, 8+ hours or I'm groggy." }
                            ]
                        },
                        {
                            id: "sleep_consistency",
                            text: "How consistent is your sleep schedule on most days?",
                            type: "mcq",
                            options: [
                                { value: "very_consistent", label: "Very Consistent", description: "I go to bed and wake up at roughly the same time every day." },
                                { value: "mostly_consistent", label: "Mostly Consistent", description: "There's some variation, but I stick to a general routine." },
                                { value: "not_consistent", label: "Not Consistent", description: "My sleep times change often based on my day." }
                            ]
                        }
                    ]
                },
                {
                    title: "Sleep Quality & Napping",
                    questions: [
                        {
                            id: "refreshed",
                            text: "Do you typically feel refreshed when you wake up?",
                            type: "mcq",
                            options: [
                                { value: "yes", label: "Yes", description: "I usually feel well-rested and ready to start the day." },
                                { value: "no", label: "No", description: "I often feel groggy or tired." }
                            ]
                        },
                        {
                            id: "napping",
                            text: "Do you take naps during the day?",
                            type: "mcq",
                            options: [
                                { value: "never", label: "Never Nap", description: "Napping throws off my sleep schedule, I power through afternoon dips." },
                                { value: "rarely", label: "Rarely Nap (1-2 times per week)", description: "Only when I'm really exhausted or didn't sleep well" },
                                { value: "sometimes", label: "Sometimes Nap (3-4 times per week)", description: "A short afternoon nap often recharges me perfectly" },
                                { value: "daily", label: "Daily Napper", description: "A 20-30 minute nap is part of my daily routine, I'm more productive after." }
                            ]
                        }
                    ]
                },
                {
                    title: "Eating & Health Habits",
                    questions: [
                        {
                            id: "breakfast_time",
                            text: "What time do you usually eat breakfast?",
                            type: "mcq",
                            options: [
                                { value: "early", label: "Early Breakfast (6-8 AM)", description: "I wake up hungry and need fuel to start my day right." },
                                { value: "standard", label: "Standard Breakfast (8-10 AM)", description: "I ease into eating, usually hungry by 9 AM" },
                                { value: "late", label: "Late Breakfast (10-12 PM)", description: "I'm not hungry in the morning, brunch timing works better." },
                                { value: "skip", label: "Breakfast Skipper", description: "I rarely feel hungry in the morning and prefer to start with lunch." }
                            ]
                        },
                        {
                            id: "lunch_time",
                            text: "What time do you typically eat lunch?",
                            type: "mcq",
                            options: [
                                { value: "early", label: "Early Luncher (11 AM-12 PM)", description: "I get hungry by 11:30, early lunch keeps me energized" },
                                { value: "standard", label: "Standard Luncher (12-1 PM)", description: "Classic lunch hour works perfectly for my schedule" },
                                { value: "late", label: "Late Luncher (1-2 PM)", description: "I get absorbed in work, often eat lunch around 1:30 PM" },
                                { value: "irregular", label: "Irregular Luncher (After 2 PM or skip)", description: "I often forget to eat lunch or grab something very late." }
                            ]
                        },
                        {
                            id: "dinner_time",
                            text: "What time do you usually eat dinner?",
                            type: "mcq",
                            options: [
                                { value: "early", label: "Early Dinner (5-6 PM)", description: "I prefer eating early; it gives me time to digest before evening activities." },
                                { value: "standard", label: "Standard Dinner (6-7 PM)", description: "Classic dinner time, works well with family/social schedules" },
                                { value: "late", label: "Late Dinner (7-8 PM)", description: "I like having dinner after unwinding from the day." },
                                { value: "very_late", label: "Very Late Dinner (After 8 PM)", description: "I often work late; dinner is usually my last activity." }
                            ]
                        },
                        {
                            id: "caffeine",
                            text: "How much caffeine do you typically consume daily?",
                            type: "mcq",
                            options: [
                                { value: "none", label: "Caffeine-Free", description: "I avoid caffeine completely, prefer natural energy" },
                                { value: "light", label: "Light User (1 cup)", description: "One morning coffee is enough, more makes me jittery." },
                                { value: "moderate", label: "Moderate User (2-3 cups)", description: "I need my morning coffee plus an afternoon pick-me-up" },
                                { value: "heavy", label: "Heavy User (4+ cups)", description: "I'm powered by caffeine throughout the day, it doesn't affect my sleep." }
                            ]
                        },
                        {
                            id: "meal_consistency",
                            text: "How consistent are your meal times?",
                            type: "mcq",
                            options: [
                                { value: "very_consistent", label: "Very Consistent", description: "I eat at almost the same times every day, my body expects it" },
                                { value: "mostly_consistent", label: "Mostly Consistent", description: "Generally regular, but weekends or busy days throw me off" },
                                { value: "sometimes_irregular", label: "Sometimes Irregular", description: "I try to be consistent, but work/life often disrupts my schedule" },
                                { value: "very_irregular", label: "Very Irregular", description: "I eat when I'm hungry or remember to, timing varies wildly" }
                            ]
                        }
                    ]
                },
                {
                    title: "Exercise & Physical Activity",
                    questions: [
                        {
                            id: "workout_time",
                            text: "What time do you typically work out?",
                            type: "mcq",
                            options: [
                                { value: "early_morning", label: "Early Morning (6-8 AM)", description: "I love starting my day with exercise, it gives me energy for everything else." },
                                { value: "late_morning", label: "Late Morning (8 AM-12 PM)", description: "After my morning routine, before the day gets too busy." },
                                { value: "afternoon", label: "Afternoon (12-5 PM)", description: "Lunch break or afternoon workouts help break up my day" },
                                { value: "evening", label: "Evening (5-9 PM)", description: "Exercise is how I decompress and transition from work mode" }
                            ]
                        },
                        {
                            id: "exercise_frequency",
                            text: "How many days per week do you usually exercise?",
                            type: "mcq",
                            options: [
                                { value: "rarely", label: "Rarely Active (0-1 days)", description: "I know I should exercise more, but I struggle to make it a habit." },
                                { value: "occasionally", label: "Occasionally Active (2-3 days)", description: "I aim for a couple of workouts per week, sometimes more." },
                                { value: "regularly", label: "Regularly Active (4-5 days)", description: "Exercise is important to me, I'm consistent most weeks" },
                                { value: "highly", label: "Highly Active (6-7 days)", description: "Exercise is a daily non-negotiable, I feel off without it." }
                            ]
                        },
                        {
                            id: "workout_duration",
                            text: "How long is your typical workout session?",
                            type: "mcq",
                            options: [
                                { value: "quick", label: "Quick Session (15-30 minutes)", description: "I prefer short, intense workouts that fit easily into my day" },
                                { value: "standard", label: "Standard Session (30-60 minutes)", description: "45-60 minutes gives me a good workout without taking over my day" },
                                { value: "long", label: "Long Session (60-90 minutes)", description: "I like thorough workouts, time to really push myself" },
                                { value: "extended", label: "Extended Session (90+ minutes)", description: "When I exercise, I go all in - it's my meditation time" }
                            ]
                        }
                    ]
                },
                {
                    title: "Work & Study Patterns",
                    questions: [
                        {
                            id: "work_start_time",
                            text: "What time do you typically start your main work/study session?",
                            type: "mcq",
                            options: [
                                { value: "very_early", label: "Very Early Start (6-8 AM)", description: "I love the quiet morning hours, my brain is clearest then" },
                                { value: "early", label: "Early Start (8-10 AM)", description: "After my morning routine, I'm ready to tackle the big stuff." },
                                { value: "standard", label: "Standard Start (10 AM-12 PM)", description: "Mid-morning is when I hit my stride and focus kicks in" },
                                { value: "late", label: "Late Start (After 12 PM)", description: "I'm more of an afternoon/evening person for deep work" }
                            ]
                        },
                        {
                            id: "work_hours",
                            text: "How many hours do you usually work/study per day?",
                            type: "mcq",
                            options: [
                                { value: "light", label: "Light Schedule (Less than 4 hours)", description: "I prefer focused, efficient work sessions over long hours" },
                                { value: "moderate", label: "Moderate Schedule (4-6 hours)", description: "I can maintain good focus for 4-6 hours of quality work" },
                                { value: "full", label: "Full Schedule (6-8 hours)", description: "I work a standard full day, with breaks to stay fresh." },
                                { value: "intensive", label: "Intensive Schedule (More than 8 hours)", description: "I'm driven and focused, often work 10+ hour days" }
                            ]
                        },
                        {
                            id: "project_approach",
                            text: "How do you prefer to tackle large projects?",
                            type: "mcq",
                            options: [
                                { value: "breakdown", label: "Task Breakdown Expert", description: "I break everything into small, manageable pieces - it feels less overwhelming." },
                                { value: "deep_work", label: "Deep Work Advocate", description: "I like to dive deep and work on projects for hours at a time." },
                                { value: "flexible", label: "Flexible Approach", description: "I mix short bursts and long sessions depending on my energy and the task." },
                                { value: "dependent", label: "Project-Dependent", description: "It really depends on the type of work - creative vs analytical needs different approaches" }
                            ]
                        },
                        {
                            id: "difficult_task_approach",
                            text: "When facing a difficult task, you typically:",
                            type: "mcq",
                            options: [
                                { value: "eat_frog", label: "Eat the Frog", description: "I tackle the hardest thing first when my willpower is strongest" },
                                { value: "warm_up", label: "Warm-Up Strategy", description: "I ease in with simpler tasks to build momentum and confidence." },
                                { value: "energy_optimization", label: "Energy Optimization", description: "I save difficult tasks for when I naturally have the most mental energy." },
                                { value: "procrastination", label: "Procrastination Pattern", description: "I'll be honest - I often put difficult tasks off until I have no choice" }
                            ]
                        }
                    ]
                },
                {
                    title: "Break & Relaxation Preferences",
                    questions: [
                        {
                            id: "work_session_length",
                            text: "How long are your ideal work sessions before taking a break?",
                            type: "mcq",
                            options: [
                                { value: "short", label: "Short Bursts (25-30 minutes)", description: "I work best in focused sprints, then need a reset" },
                                { value: "standard", label: "Standard Focus (45-60 minutes)", description: "About an hour of focused work, then I need to step away." },
                                { value: "deep_dive", label: "Deep Dive (90+ minutes)", description: "When I'm in the zone, I can go for hours without stopping." },
                                { value: "variable", label: "Variable Length", description: "Depends on the task and my energy - I listen to my body and brain" }
                            ]
                        },
                        {
                            id: "break_type",
                            text: "What type of breaks help you recharge most?",
                            type: "mcq",
                            options: [
                                { value: "movement", label: "Movement Breaks", description: "I need to get my body moving - walks, stretches, quick workouts" },
                                { value: "social", label: "Social Recharge", description: "Talking to people energizes me, even brief conversations help." },
                                { value: "solitude", label: "Solitude Reset", description: "I need quiet alone time to process and recharge my mental batteries." },
                                { value: "creative", label: "Creative Escape", description: "Doing something creative or playful helps reset my brain completely." }
                            ]
                        }
                    ]
                },
                {
                    title: "Technology & Social Habits",
                    questions: [
                        {
                            id: "social_media_hours",
                            text: "How many hours do you spend on social media daily?",
                            type: "mcq",
                            options: [
                                { value: "minimal", label: "Minimal User (Less than 1 hour)", description: "I check occasionally but prefer to minimize social media time" },
                                { value: "light", label: "Light User (1-2 hours)", description: "Some morning and evening scrolling, but I'm pretty disciplined" },
                                { value: "moderate", label: "Moderate User (2-4 hours)", description: "I enjoy social media throughout the day, it's part of my routine." },
                                { value: "heavy", label: "Heavy User (More than 4 hours)", description: "Social media is a big part of how I connect and get information." }
                            ]
                        },
                        {
                            id: "notifications",
                            text: "How do you handle notifications during focused work?",
                            type: "mcq",
                            options: [
                                { value: "blocker", label: "Notification Blocker", description: "All notifications off - I check messages when I decide to, not when they arrive" },
                                { value: "selective", label: "Selective Filter", description: "Only truly urgent things can interrupt me; everything else waits." },
                                { value: "controlled", label: "Controlled Interruptions", description: "Some notifications are okay, I can usually refocus quickly." },
                                { value: "open_door", label: "Open Door Policy", description: "I don't mind interruptions, I can multitask and stay productive." }
                            ]
                        }
                    ]
                },
                {
                    title: "Learning & Organization",
                    questions: [
                        {
                            id: "learning_style",
                            text: "How do you prefer to learn new information?",
                            type: "mcq",
                            options: [
                                { value: "visual", label: "Visual Learner", description: "I need to see it - diagrams, written instructions, visual examples work best" },
                                { value: "auditory", label: "Auditory Learner", description: "I learn through listening - podcasts, explanations, talking through ideas" },
                                { value: "kinesthetic", label: "Kinesthetic Learner", description: "I learn by doing - hands-on practice and experimentation" },
                                { value: "social", label: "Social Learner", description: "I learn best through discussion, teaching others, and collaborative exploration." }
                            ]
                        },
                        {
                            id: "organization_style",
                            text: "How do you prefer to organize your day?",
                            type: "mcq",
                            options: [
                                { value: "detailed_scheduler", label: "Detailed Scheduler", description: "I time-block everything, a detailed calendar keeps me on track" },
                                { value: "list_maker", label: "List Maker", description: "Simple to-do lists work perfectly. I like checking things off." },
                                { value: "mental_organizer", label: "Mental Organizer", description: "I keep track of everything in my head; external tools feel restrictive." },
                                { value: "flow_follower", label: "Flow Follower", description: "I prefer to stay flexible and respond to what feels right in the moment." }
                            ]
                        },
                        {
                            id: "work_environment",
                            text: "What's your ideal work environment?",
                            type: "mcq",
                            options: [
                                { value: "silence", label: "Complete Silence", description: "Any noise distracts me; I need total quiet to think clearly." },
                                { value: "background_music", label: "Background Music", description: "Instrumental music or familiar songs help me focus and stay energized" },
                                { value: "natural_ambience", label: "Natural Ambience", description: "White noise, nature sounds, or coffee shop atmosphere is perfect" },
                                { value: "active_environment", label: "Active Environment", description: "I actually focus better with some activity and energy around me" }
                            ]
                        }
                    ]
                }
            ];

            const handleAnswer = (questionId, answer) => {
                setFormData(prev => ({
                    ...prev,
                    [questionId]: answer
                }));
            };

            const handleNext = () => {
                if (currentSection < sections.length - 1) {
                    setCurrentSection(currentSection + 1);
                } else {
                    onComplete(formData);
                }
            };

            const handlePrevious = () => {
                if (currentSection > 0) {
                    setCurrentSection(currentSection - 1);
                }
            };

            const isCurrentSectionComplete = () => {
                const currentSectionQuestions = sections[currentSection].questions;
                return currentSectionQuestions.every(q => formData[q.id]);
            };

            const totalQuestions = sections.reduce((total, section) => total + section.questions.length, 0);
            const answeredQuestions = Object.keys(formData).length;
            const progress = (answeredQuestions / totalQuestions) * 100;

            const renderQuestion = (question) => {
                if (question.type === 'mcq') {
                    return (
                        <div key={question.id} className="question">
                            <div className="question-text">{question.text}</div>
                            <div className="options">
                                {question.options.map((option) => (
                                    <div
                                        key={option.value}
                                        className={`option ${formData[question.id] === option.value ? 'selected' : ''}`}
                                        onClick={() => handleAnswer(question.id, option.value)}
                                    >
                                        <div className="option-label">{option.label}</div>
                                        <div className="option-description">{option.description}</div>
                                    </div>
                                ))}
                            </div>
                        </div>
                    );
                }
                return null;
            };

            return (
                <div className="container">
                    <div className="progress-bar">
                        <div className="progress-fill" style={{ width: `${progress}%` }}></div>
                    </div>
                    <div className="progress-text">
                        Section {currentSection + 1} of {sections.length} â€¢ {answeredQuestions} of {totalQuestions} questions answered
                    </div>

                    <div className="section">
                        <h2 className="section-title">{sections[currentSection].title}</h2>
                        {sections[currentSection].questions.map(renderQuestion)}
                    </div>

                    <div className="button-container">
                        {currentSection > 0 && (
                            <button className="button secondary" onClick={handlePrevious}>
                                Previous
                            </button>
                        )}
                        <button 
                            className="button" 
                            onClick={handleNext}
                            disabled={!isCurrentSectionComplete()}
                        >
                            {currentSection === sections.length - 1 ? 'Complete Assessment' : 'Next Section'}
                        </button>
                    </div>
                </div>
            );
        };

        // Dashboard Component (simplified)
        const Dashboard = ({ userData, onRestart }) => {
            return (
                <div className="container">
                    <div className="section">
                        <h2 className="section-title">Your SYNAPSE Dashboard</h2>
                        <div style={{ 
                            background: 'rgba(255, 255, 255, 0.1)', 
                            borderRadius: '16px', 
                            padding: '40px', 
                            textAlign: 'center',
                            border: '1px solid rgba(255, 255, 255, 0.2)'
                        }}>
                            <h3 style={{ marginBottom: '20px', color: '#4ecdc4' }}>Welcome to SYNAPSE!</h3>
                            <p style={{ marginBottom: '30px', fontSize: '1.1rem', lineHeight: '1.5' }}>
                                Your initial assessment is complete. Use the AI analysis below to get insights about your productivity patterns.
                            </p>
                        </div>

                        <div className="button-container">
                            <button className="button secondary" onClick={onRestart}>
                                Retake Assessment
                            </button>
                        </div>
                    </div>
                </div>
            );
        };

        ReactDOM.render(<IntegratedApp />, document.getElementById('root'));
    </script>
</body>
</html>
